<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Focure</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: "Inter",
    }

    body {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at top, #0f172a 0, #020617 45%, #020617 100%);
      color: #e5e7eb;
      transition: background 0.2s ease, color 0.2s ease;
    }

    .wrapper {
      width: 100%;
      max-width: 980px;
      display: grid;
      grid-template-columns: minmax(0, 1.25fr) minmax(0, 1fr);
      gap: 2.5rem;
      padding: 2.5rem 1.5rem;
    }

    @media (max-width: 800px) {
      .wrapper {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .hero {
      padding: 2rem;
    }

    .logo-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
    }

    .logo {
      font-size: 1.7rem;
      font-weight: 700;
      letter-spacing: 0.04em;
      display: flex;
      align-items: center;
      gap: 0.6rem;
      color: #e5e7eb;
    }

    .logo-pill {
      width: 32px;
      height: 32px;
      border-radius: 999px;
      border: 2px solid #38bdf8;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.8rem;
      font-weight: 700;
      color: #0ea5e9;
      background: rgba(8, 47, 73, 0.9);
    }

    .theme-toggle {
      border-radius: 999px;
      border: 1px solid #4b5563;
      background: transparent;
      color: #e5e7eb;
      padding: 0.35rem 0.85rem;
      font-size: 0.78rem;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
      transition: background 0.15s, border 0.15s, transform 0.1s;
    }

    .theme-toggle:hover {
      background: rgba(15, 23, 42, 0.8);
      border-color: #9ca3af;
      transform: translateY(-1px);
    }

    .hero h1 {
      font-size: 2.4rem;
      line-height: 1.1;
      margin-bottom: 0.9rem;
    }

    .hero h1 span {
      color: #38bdf8;
    }

    .hero p {
      font-size: 0.98rem;
      color: #9ca3af;
      max-width: 32rem;
      margin-bottom: 1.6rem;
    }

    .hero-highlights {
      display: flex;
      flex-wrap: wrap;
      gap: 0.6rem;
      margin-bottom: 1.8rem;
    }

    .tag {
      font-size: 0.75rem;
      padding: 0.25rem 0.7rem;
      border-radius: 999px;
      background: rgba(56, 189, 248, 0.08);
      color: #38bdf8;
      border: 1px solid rgba(56, 189, 248, 0.4);
    }

    .hero-footnote {
      font-size: 0.8rem;
      color: #6b7280;
    }

    .card {
      background: rgba(15, 23, 42, 0.96);
      border-radius: 1.25rem;
      padding: 1.8rem 1.7rem;
      box-shadow: 0 18px 45px rgba(0, 0, 0, 0.6);
      border: 1px solid rgba(30, 64, 175, 0.9);
      backdrop-filter: blur(10px);
    }

    .card h2 {
      font-size: 1.2rem;
      margin-bottom: 0.4rem;
      color: #e5e7eb;
    }

    .card-subtitle {
      font-size: 0.85rem;
      color: #9ca3af;
      margin-bottom: 1.3rem;
    }

    .auth-tabs {
      display: inline-flex;
      padding: 0.2rem;
      border-radius: 999px;
      background: #020617;
      border: 1px solid #1f2937;
      margin-bottom: 1.1rem;
    }

    .tab-btn {
      border: none;
      background: transparent;
      color: #9ca3af;
      font-size: 0.78rem;
      font-weight: 500;
      padding: 0.4rem 0.9rem;
      border-radius: 999px;
      cursor: pointer;
      transition: background 0.15s, color 0.15s;
    }

    .tab-btn.active {
      background: #1d4ed8;
      color: #e5e7eb;
    }

    .field-row {
      display: flex;
      gap: 0.6rem;
    }

    .field-label {
      font-size: 0.8rem;
      color: #cbd5f5;
      margin-bottom: 0.25rem;
    }

    .input {
      width: 100%;
      padding: 0.55rem 0.75rem;
      border-radius: 0.65rem;
      border: 1px solid #1f2937;
      background: #020617;
      font-size: 0.9rem;
      color: #e5e7eb;
      outline: none;
      margin-bottom: 0.9rem;
      transition: border 0.15s, box-shadow 0.15s, background 0.15s, color 0.15s;
    }

    .input::placeholder {
      color: #6b7280;
    }

    .input:focus {
      border-color: #38bdf8;
      box-shadow: 0 0 0 2px rgba(56, 189, 248, 0.25);
      background: #020617;
    }

    .button-row {
      display: flex;
      gap: 0.65rem;
      margin-top: 0.2rem;
      margin-bottom: 0.75rem;
    }

    .btn {
      flex: 1;
      border: none;
      border-radius: 999px;
      padding: 0.6rem 0.9rem;
      font-size: 0.85rem;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.12s ease, box-shadow 0.12s ease, background 0.15s, color 0.15s;
    }

    .btn-primary {
      background: linear-gradient(to right, #1d4ed8, #1e40af);
      color: white;
      box-shadow: 0 12px 25px rgba(30, 64, 175, 0.65);
    }

    .btn-outline {
      background: transparent;
      color: #e5e7eb;
      border: 1px solid #4b5563;
    }

    .btn:hover {
      transform: translateY(-1px);
    }

    .btn-primary:hover {
      box-shadow: 0 16px 35px rgba(30, 64, 175, 0.8);
      filter: brightness(1.05);
    }

    .btn-outline:hover {
      border-color: #9ca3af;
      background: rgba(15, 23, 42, 0.75);
    }

    .muted {
      font-size: 0.78rem;
      color: #6b7280;
    }

    .session-info {
      margin-top: 1.1rem;
      padding: 0.75rem 0.75rem 0.5rem;
      border-radius: 0.9rem;
      background: rgba(15, 23, 42, 0.9);
      border: 1px dashed rgba(55, 65, 81, 0.9);
    }

    .session-info p {
      font-size: 0.82rem;
      color: #9ca3af;
      margin-bottom: 0.4rem;
    }

    .session-info strong {
      color: #e5e7eb;
    }

    .streak-pill {
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      padding: 0.25rem 0.6rem;
      border-radius: 999px;
      background: rgba(22, 163, 74, 0.08);
      border: 1px solid #16a34a;
      font-size: 0.8rem;
      color: #bbf7d0;
      margin-top: 0.25rem;
    }

    .streak-pill span {
      font-weight: 600;
      color: #4ade80;
    }

    .app-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.9rem;
    }

    #welcomeText {
      font-size: 0.98rem;
      font-weight: 600;
      color: #e5e7eb;
      margin-bottom: 0.15rem;
    }

    #welcomeSub {
      font-size: 0.8rem;
      color: #9ca3af;
      margin-bottom: 0.7rem;
    }

    .avatar-btn {
      width: 34px;
      height: 34px;
      border-radius: 999px;
      border: 1px solid #475569;
      background: #020617;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 0.9rem;
      font-weight: 600;
      color: #e5e7eb;
      cursor: pointer;
      transition: transform 0.1s, box-shadow 0.1s, background 0.15s;
    }

    .avatar-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 8px 18px rgba(15, 23, 42, 0.7);
    }

    .stats-row {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 0.75rem;
      margin-bottom: 1.1rem;
    }

    @media (max-width: 480px) {
      .stats-row {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }

    .stat-card {
      border-radius: 0.9rem;
      background: #020617;
      border: 1px solid #1f2937;
      padding: 0.6rem 0.7rem;
    }

    .stat-label {
      font-size: 0.75rem;
      color: #9ca3af;
      margin-bottom: 0.1rem;
    }

    .stat-value {
      font-size: 1.1rem;
      font-weight: 600;
    }

    .stat-note {
      font-size: 0.72rem;
      color: #6b7280;
      margin-top: 0.1rem;
    }

    .profile-modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(15, 23, 42, 0.65);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 40;
      backdrop-filter: blur(5px);
    }

    .profile-modal {
      width: 100%;
      max-width: 520px;
      background: #020617;
      border-radius: 1.2rem;
      border: 1px solid #1f2937;
      box-shadow: 0 24px 60px rgba(0, 0, 0, 0.8);
      padding: 1.4rem 1.5rem 1.1rem;
    }

    .profile-modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.7rem;
    }

    .profile-modal-title {
      font-size: 1rem;
      font-weight: 600;
    }

    .profile-modal-close {
      border: none;
      background: transparent;
      color: #9ca3af;
      font-size: 1.1rem;
      cursor: pointer;
      padding: 0.1rem 0.3rem;
      border-radius: 999px;
      transition: background 0.15s, color 0.15s;
    }

    .profile-modal-close:hover {
      background: #111827;
      color: #e5e7eb;
    }

    .profile-modal-body {
      margin-top: 0.2rem;
    }

    .profile-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 0.6rem;
      margin-bottom: 0.6rem;
    }

    @media (max-width: 520px) {
      .profile-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .profile-actions {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
      margin-top: 0.7rem;
    }

    .btn-sm {
      flex: 0;
      padding: 0.45rem 0.8rem;
      font-size: 0.78rem;
    }

    .profile-email {
      font-size: 0.8rem;
      color: #9ca3af;
      margin-top: 0.2rem;
    }

    /* LIGHT THEME OVERRIDES */
    body.light-theme {
      background: radial-gradient(circle at top, #e0f2ff 0, #f5f7fb 45%, #e5edff 100%);
      color: #0f172a;
    }

    body.light-theme .hero p,
    body.light-theme .hero-footnote {
      color: #4b5563;
    }

    body.light-theme .card {
      background: #ffffff;
      border-color: #e5e7eb;
      box-shadow: 0 18px 45px rgba(148, 163, 184, 0.4);
    }

    body.light-theme .theme-toggle {
      border-color: #cbd5e1;
      color: #1f2937;
      background: rgba(255, 255, 255, 0.7);
    }

    body.light-theme .theme-toggle:hover {
      background: #e5edff;
      border-color: #94a3b8;
    }

    body.light-theme .input {
      background: #f9fafb;
      border-color: #d1d5db;
      color: #111827;
    }

    body.light-theme .input::placeholder {
      color: #9ca3af;
    }

    body.light-theme .session-info {
      background: #f9fafb;
      border-color: #e5e7eb;
    }

    body.light-theme .session-info p {
      color: #4b5563;
    }

    body.light-theme #welcomeText {
      color: #111827;
    }

    body.light-theme #welcomeSub {
      color: #6b7280;
    }

    body.light-theme .btn-outline {
      color: #111827;
      border-color: #cbd5e1;
    }

    body.light-theme .btn-outline:hover {
      background: #e5edff;
    }

    body.light-theme .auth-tabs {
      background: #f9fafb;
      border-color: #e5e7eb;
    }

    body.light-theme .tab-btn {
      color: #6b7280;
    }

    body.light-theme .tab-btn.active {
      background: #1d4ed8;
      color: #eef2ff;
    }

    body.light-theme .stat-card {
      background: #f9fafb;
      border-color: #e5e7eb;
    }

    body.light-theme .avatar-btn {
      background: #f9fafb;
      color: #111827;
      border-color: #cbd5e1;
    }

    body.light-theme .profile-modal {
      background: #ffffff;
      border-color: #e5e7eb;
    }

    body.light-theme .profile-modal-close:hover {
      background: #e5edff;
      color: #0f172a;
    }

    body.light-theme .profile-email {
      color: #4b5563;
    }
  </style>
</head>
<body>
  <div class="wrapper">
    <section class="hero">
      <div class="logo-row">
        <div class="logo">
          <div class="logo-pill">F</div>
          Focure
        </div>
        <button id="themeToggle" class="theme-toggle">
          ðŸŒ™ Dark mode
        </button>
      </div>
      <h1>
        Study together in<br>
        <span>focus mode.</span>
      </h1>
      <p>
        Focure turns studying into a shared goal. Start a room, share with friend, and let
        it keep you both away from distractions.
      </p>

      <p class="hero-footnote">
        Your account stores your name, grade, username, and streaks.
      </p>
    </section>

    <section class="card">
      <div id="authSection">
        <h2>Get started</h2>
        <p class="card-subtitle">Choose whether you want to log in or create a new account.</p>

    <div class="auth-tabs">
      <button id="loginTab" class="tab-btn active" onclick="showLogIn()">Log in</button>
      <button id="signupTab" class="tab-btn" onclick="showSignUp()">Sign up</button>
    </div>

        <div id="loginForm">
          <label class="field-label" for="loginId">Email or username</label>
          <input id="loginId" type="text" class="input" placeholder="email@school.ca or username">

          <label class="field-label" for="loginPassword">Password</label>
          <input id="loginPassword" type="password" class="input" placeholder="Your password">

        <div class="button-row">
         <button class="btn btn-primary" onclick="logIn()">Log in</button>
        </div>


          <p class="muted">
            Tip: first try the email you use most often for school.
          </p>
        </div>
        <div id="signupForm" style="display:none;">
          <div class="field-row">
            <div style="flex:1;">
              <label class="field-label" for="signupFirstName">First name</label>
              <input id="signupFirstName" type="text" class="input" placeholder="Gurnoor">
            </div>
            <div style="flex:1;">
              <label class="field-label" for="signupLastName">Last name</label>
              <input id="signupLastName" type="text" class="input" placeholder="Kaur">
            </div>
          </div>

          <label class="field-label" for="signupUsername">Username</label>
          <input id="signupUsername" type="text" class="input" placeholder="focure_gurnoor">

          <label class="field-label" for="signupGrade">Grade (optional)</label>
          <input id="signupGrade" type="text" class="input" placeholder="11">

          <label class="field-label" for="signupEmail">Email</label>
          <input id="signupEmail" type="email" class="input" placeholder="you@example.com">

          <label class="field-label" for="signupPassword">Password</label>
          <input id="signupPassword" type="password" class="input" placeholder="At least 6 characters">

          <div class="button-row">
            <button class="btn btn-primary" onclick="signUp()">Sign up</button>
          </div>

          <p class="muted">
            You can log in later with either your email or your username.
          </p>
        </div>
      </div>
      <div id="appSection" style="display:none;">
        <div class="app-header">
          <div>
            <p id="welcomeText"></p>
            <p id="welcomeSub"></p>
          </div>
          <button class="avatar-btn" id="profileButton" onclick="openProfileModal()">
            <span id="profileInitial">F</span>
          </button>
        </div>

        <div class="stats-row">
          <div class="stat-card">
            <div class="stat-label">Total focus time</div>
            <div class="stat-value"><span id="totalStreak">0</span> min</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">Longest streak</div>
            <div class="stat-value"><span id="maxStreak">0</span> min</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">Sessions joined</div>
            <div class="stat-value"><span id="sessionsCount">0</span></div>
          </div>
        </div>

        <div class="streak-pill">
          Current total streak:
          <span id="totalStreakBadge">0</span> min
        </div>

        <div style="margin-top:1.3rem;">
          <button class="btn btn-primary" style="width:100%;" onclick="createSession()">
            Start a focus session
          </button>
        </div>

        <div style="margin-top:0.65rem;">
          <button class="btn btn-outline" style="width:100%;" onclick="logOut()">
            Log out
          </button>
        </div>

        <div class="session-info">
          <p><strong>How it works:</strong></p>
          <p>1. Start a focus session and get your room link.</p>
          <p>2. Share it with a friend.</p>
          <p>3. Your shared streak grows when you both will stay focused.</p>
        </div>
      </div>
    </section>
  </div>

  <div id="profileModalBackdrop" class="profile-modal-backdrop">
    <div class="profile-modal" onclick="event.stopPropagation()">
      <div class="profile-modal-header">
        <div>
          <div class="profile-modal-title">Account & profile</div>
          <div class="muted" style="margin-top:0.1rem;">Update your details and password.</div>
        </div>
        <button class="profile-modal-close" onclick="closeProfileModal()">âœ•</button>
      </div>
      <div class="profile-modal-body">
        <div class="profile-grid">
          <div>
            <label class="field-label" for="profileUsername">Username</label>
            <input id="profileUsername" type="text" class="input" placeholder="your username">
          </div>
          <div>
            <label class="field-label" for="profileGrade">Grade</label>
            <input id="profileGrade" type="text" class="input" placeholder="e.g. 11">
          </div>
          <div>
            <label class="field-label" for="profileFirstName">First name</label>
            <input id="profileFirstName" type="text" class="input" placeholder="First name">
          </div>
          <div>
            <label class="field-label" for="profileLastName">Last name</label>
            <input id="profileLastName" type="text" class="input" placeholder="Last name">
          </div>
        </div>
        <p class="profile-email">
          Email: <span id="profileEmail"></span>
        </p>

        <div class="profile-actions">
          <button class="btn btn-primary btn-sm" onclick="saveProfile()">Save profile</button>
          <button class="btn btn-outline btn-sm" onclick="changePassword()">Change password</button>
        </div>
      </div>
    </div>
  </div>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
  <script src="app.js"></script>

  <script>
    (function () {
      var body = document.body;
      var toggle = document.getElementById("themeToggle");

      var saved = localStorage.getItem("focure-theme");
      if (saved === "light") {
        body.classList.add("light-theme");
      }

      function updateLabel() {
        var isLight = body.classList.contains("light-theme");
        toggle.textContent = isLight ? "ðŸŒž Light mode" : "ðŸŒ™ Dark mode";
      }

      updateLabel();

      toggle.addEventListener("click", function () {
        body.classList.toggle("light-theme");
        var isLight = body.classList.contains("light-theme");
        localStorage.setItem("focure-theme", isLight ? "light" : "dark");
        updateLabel();
      });
    })();

    function showLogIn() {
      document.getElementById("loginTab").classList.add("active");
      document.getElementById("signupTab").classList.remove("active");
      document.getElementById("loginForm").style.display = "block";
      document.getElementById("signupForm").style.display = "none";
    }

    function showSignUp() {
      document.getElementById("signupTab").classList.add("active");
      document.getElementById("loginTab").classList.remove("active");
      document.getElementById("signupForm").style.display = "block";
      document.getElementById("loginForm").style.display = "none";
    }

    function openProfileModal() {
      var backdrop = document.getElementById("profileModalBackdrop");
      if (backdrop) backdrop.style.display = "flex";
    }

    function closeProfileModal() {
      var backdrop = document.getElementById("profileModalBackdrop");
      if (backdrop) backdrop.style.display = "none";
    }


    (function () {
      var backdrop = document.getElementById("profileModalBackdrop");
      if (!backdrop) return;
      backdrop.addEventListener("click", function () {
        closeProfileModal();
      });
    })();
    window.showLogIn = showLogIn;
    window.showSignUp = showSignUp;
    window.openProfileModal = openProfileModal;
    window.closeProfileModal = closeProfileModal;
  </script>
</body>
</html>
